(function(c){function f(g){return"function"==typeof g}function h(g){"undefined"!=typeof setImmediate?setImmediate(g):"undefined"!=typeof process&&process.nextTick?process.nextTick(g):setTimeout(g,0)}c[0][c[1]]=function m(){function c(l,f){null==a&&null!=l&&(a=l,k=f,b.length&&h(function(){for(var a=0;a<b.length;a++)b[a]()}));return a}var a,k=[],b=[];c.then=function(c,n){function e(){try{var b=a?c:n;if(f(b)){var h=function(a){var c,b=0;try{if(a&&("object"==typeof a||f(a))&&f(c=a.then)){if(a===d)throw new TypeError;
c.call(a,function(){b++||h.apply(void 0,arguments)},function(a){b++||d(!1,[a])})}else d(!0,arguments)}catch(e){b++||d(!1,[e])}};h(b.apply(void 0,k||[]))}else d(a,k)}catch(e){d(!1,[e])}}var d=m();null!=a?h(e):b.push(e);return d};return c}})("undefined"==typeof module?[window,"pinkySwear"]:[module,"exports"]);